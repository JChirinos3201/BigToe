<!doctype html>
<html lang="en" class="h-100 w-100">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">

  <style>
    #account_icon {
      text-decoration: none;
      color: inherit;
    }

    #account_icon:hover {
      filter: brightness(55%);
    }

    .project-links {
      text-decoration: none;
    }

    .project-links:hover {
      text-decoration: none;
    }
  </style>


  <title>Profile &bull; Code X Lab</title>
</head>

<body class="h-100 d-flex flex-column w-100">
  <nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand" href="/projects">Code X Lab</a>
    <a class="fas fa-user-circle fa-2x" id="account_icon" href="/profile"></a>
  </nav>

  <div class="container-fluid flex-grow-1 text-center w-100">
    {% set msgs = get_flashed_messages() %}
    {% for msg in msgs %}
    <div class="alert alert-info mx-auto my-2" style="max-width: 500px;">{{msg}}</div>
    {% endfor %}
    <div class="card mx-auto my-3" style="max-width: 500px;">
      <h2 class="card-header">Your Profile</h2>
      <div class="card-body">
        <form method="post" action="/change_password">
          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" class="form-control" value="{{email}}" readonly>
          </div>
          <div class="form-group">
            <label for="password">New Password</label>
            <div class="input-group">
              <input type="password" id="password" name="password" placeholder="Password" class="form-control" maxlength="30" required>
              <div class="input-group-append">
                <button class="btn border text-muted" type="button" id="topEye" onclick="show_hide_password();"><i class="fas fa-eye"></i></button>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="password-verify">Verify New Password</label>
            <div class="input-group">
              <input type="password" id="password-verify" name="password-verify" placeholder="Re-enter password" class="form-control" maxlength="30" required>
              <div class="input-group-append">
                <button class="btn border text-muted" type="button" id="bottomEye" onclick="show_hide_password_verify();"><i class="fas fa-eye"></i></button>
              </div>
            </div>
          </div>
          <button class="btn btn-success" type="submit">Change password</button>
        </form>
        <hr>
        <a class="btn btn-danger text-white" href="/logout">Log out</a>

      </div>
    </div>
  </div>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script>
    var password = document.getElementById('password');
    var password_verify = document.getElementById('password-verify');
    var top_eye = document.getElementById('topEye');
    var bottom_eye = document.getElementById('bottomEye');

    var show_hide_password = function() {
      if (password.type == 'password') {
        password.type = 'text';
        top_eye.innerHTML = '<i class="fas fa-eye-slash"></i>';
      } else {
        password.type = 'password';
        top_eye.innerHTML = '<i class="fas fa-eye"></i>';
      }
    }

    var show_hide_password_verify = function() {
      if (password_verify.type == 'password') {
        password_verify.type = 'text';
        bottom_eye.innerHTML = '<i class="fas fa-eye-slash"></i>';
      } else {
        password_verify.type = 'password';
        bottom_eye.innerHTML = '<i class="fas fa-eye"></i>';
      }
    }
  </script>
</body></html>
